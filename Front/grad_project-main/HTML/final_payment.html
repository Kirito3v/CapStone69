<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="Image" href="LOGO.png" >
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment</title>
    <link rel="stylesheet" href="../CSS/navbar_style.css">
    <link rel="stylesheet" href="../CSS/final_payment.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gabarito&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="navbar">
            <div class="logo">ELECTRO<span>VIA</span></div>
        
            <div class="search-box">
              <input type="text" placeholder="Search">
              <i class="fas fa-search"></i>
            </div>
        
            <div class="menu-toggle" id="menu-toggle">
              <i class="fas fa-bars"></i>
            </div>
        
            <div class="nav-links" id="nav-links">
              <a href="./Home Page/home.html">Home</a>
              <a href="#about">About</a>
              <a href="./about.html">Contact Us</a>
              <div class="mobile-icons">
                <a href=""><i class="far fa-heart"></i></a>
                <a href="./final_cart.html"><div class="cart-icon">
                  <i class="fas fa-shopping-cart"></i>
                  <span class="cart-count">0</span>
                </div></a>
                <a href="./login page/login.html"><i class="fas fa-user"></i></a>
              </div>
            </div>
        
            <div class="icons desktop-icons">
              <a href=""><i class="far fa-heart"></i></a>
              <div class="cart-icon">
                <a href="./final_cart.html"><i class="fas fa-shopping-cart"></i>
                <span class="cart-count">0</span></a>
              </div>
              <a href="./login page/login.html"><i class="fas fa-user"></i></a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <!-- Summary Section -->
        <div class="summary">
            <h2>Summary</h2>
            <div id="cart-items-container">
                <!-- Cart items will be dynamically inserted here -->
            </div>
        
            <div class="order-summary">
                <div class="section">
                    <h3>Address</h3>
                    <p id="shipping-address">Loading address...</p>
                </div>
                <div class="section">
                    <h3>Shipment Method</h3>
                    <p id="shipping-method">Loading shipping info...</p>
                </div>
                <div class="section">
                    <p>Subtotal <span class="price" id="subtotal">$0</span></p>
                    <p>Shipping <span class="price" id="shipping-cost">$0</span></p>
                    <p>Estimated Tax <span class="price" id="tax">$0</span></p>
                </div>
                <div class="section total">
                    <p>Total <span class="price" id="total">$0</span></p>
                </div>
            </div>
        </div>

        <!-- Payment Section -->
        <div class="payment">
            <h2>Payment</h2>
            <h3><strong><u>Credit Card</u></strong></h3>
            <div class="card">
                <img src="../images/visa.png" alt="Visa Card">
            </div>

            <form>
                <label for="cardholder-name">Cardholder Name</label>
                <input type="text" id="cardholder-name" placeholder="Cardholder Name" aria-label="Cardholder Name" required>

                <label for="card-number">Card Number</label>
                <input type="text" id="card-number" placeholder="Card Number" aria-label="Card Number" required pattern="\d{16}">

                <div class="form-row">
                    <div>
                        <label for="exp-date">Expiration Date</label>
                        <input type="text" id="exp-date" placeholder="MM/YY" aria-label="Expiration Date" required>
                    </div>
                    <div>
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" placeholder="CVV" aria-label="CVV" required pattern="\d{3}">
                    </div>
                </div>

                <label class="custom-checkbox">
                    <input type="checkbox" aria-label="Same as billing address">
                    <span class="checkmark"></span>
                    Same as billing address
                </label>
            </form>

            <div class="actions">
                <a href="final_shipping.html">
                <button  class="back">Back</button>
                </a>
                <button onclick="showMessage()" class="pay">Pay</button>
                <p id="confirmationMessage" style="display: none; color: rgb(0, 0, 0); font-weight: bold; margin-top: 10px;">
                    ðŸ‘Œ Ordered Successfully! You will receive an email with your order details.
                  </p>
                  
                  <script>
                    function showMessage() {
                      document.getElementById("confirmationMessage").style.display = "block";
                    }
                  </script>
            </div>
        </div>
    </div>

    <!-- Footer Section -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-brand">
                <h2>ELECTROVIA</h2>
                <section id="about">
                <p>
                    We are a residential interior design firm located in Portland. Our boutique-studio offers more than just design services; we create spaces that inspire.
                </p>
                <div class="footer-social">
                    <a href="#" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" aria-label="TikTok"><i class="fab fa-tiktok"></i></a>
                </div>
            </section>
            </div>
            <div class="footer-links">
                <div class="footer-column">
                    <h4>Services</h4>
                    <ul>
                        <li><a href="#">Bonus Program</a></li>
                        <li><a href="#">Gift Cards</a></li>
                        <li><a href="#">Credit and Payment</a></li>
                        <li><a href="#">Service Contracts</a></li>
                        <li><a href="#">Non-Cash Account</a></li>
                        <li><a href="#">Payment</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Assistance to the Buyer</h4>
                    <ul>
                        <li><a href="#">Find an Order</a></li>
                        <li><a href="#">Terms of Delivery</a></li>
                        <li><a href="#">Exchange and Return of Goods</a></li>
                        <li><a href="#">Guarantee</a></li>
                        <li><a href="#">Frequently Asked Questions</a></li>
                        <li><a href="#">Terms of Use of the Site</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load cart items from localStorage
            const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            const cartContainer = document.getElementById('cart-items-container');
            let subtotal = 0;
    
            // Clear existing static items
            cartContainer.innerHTML = '';
    
            // Add each cart item to the summary
            cartItems.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'summary-item';
                itemElement.innerHTML = `
                    <div class="product-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <span>${item.name} ${item.color ? '(' + item.color + ')' : ''}</span>
                    <span class="price">$${(item.price * item.quantity).toFixed(2)}</span>
                `;
                cartContainer.appendChild(itemElement);
                
                subtotal += item.price * item.quantity;
            });
    
            // Calculate totals
            const taxRate = 0.08; // 8% tax
            const shippingCost = subtotal > 100 ? 0 : 29; // Free shipping over $100
            const tax = subtotal * taxRate;
            const total = subtotal + tax + shippingCost;
    
            // Update summary values
            document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
            document.getElementById('shipping').textContent = `$${shippingCost.toFixed(2)}`;
            document.getElementById('total').textContent = `$${total.toFixed(2)}`;
    
            // Load shipping address if available
            const savedAddress = localStorage.getItem('shippingAddress');
            if (savedAddress) {
                document.getElementById('shipping-address').textContent = savedAddress;
            }
        });
    
        function showMessage() {
            document.getElementById("confirmationMessage").style.display = "block";
            // Clear the cart after successful payment
            localStorage.removeItem('cartItems');
            // You might want to redirect after a delay
            setTimeout(() => {
                window.location.href = 'order_confirmation.html'; // Create this page
            }, 3000);
        }
    </script>


<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Load cart items
        const cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
        const cartContainer = document.getElementById('cart-items-container');
        let subtotal = 0;
        
        // Clear container and calculate subtotal
        cartContainer.innerHTML = '';
        cartItems.forEach(item => {
            const itemElement = document.createElement('div');
            itemElement.className = 'summary-item';
            itemElement.innerHTML = `
                <div class="product-image">
                    <img src="${item.image}" alt="${item.name}">
                </div>
                <span>${item.name} ${item.color ? '(' + item.color + ')' : ''}</span>
                <span class="price">$${(item.price * item.quantity).toFixed(2)}</span>
            `;
            cartContainer.appendChild(itemElement);
            subtotal += item.price * item.quantity;
        });
        
        // Load shipping info
        const shippingInfo = JSON.parse(localStorage.getItem('shippingInfo')) || { cost: 0 };
        const address = localStorage.getItem('shippingAddress') || 'Address not specified';
        
        // Calculate totals
        const taxRate = 0.08; // 8% tax
        const tax = subtotal * taxRate;
        const total = subtotal + tax + shippingInfo.cost;
        
        // Update UI
        document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
        document.getElementById('shipping-cost').textContent = `$${shippingInfo.cost.toFixed(2)}`;
        document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
        document.getElementById('total').textContent = `$${total.toFixed(2)}`;
        document.getElementById('shipping-address').textContent = address;
        
        // Display shipping method
        const shippingMethodDisplay = {
            'free': 'Free Regular Shipping',
            'express': 'Express Shipping ($8.50)',
            'schedule': 'Scheduled Shipping ($5.00)'
        };
        document.getElementById('shipping-method').textContent = 
            shippingInfo.method ? shippingMethodDisplay[shippingInfo.method] : 'Not selected';
    });

    const toggle = document.getElementById('menu-toggle');
    const navLinks = document.getElementById('nav-links');

    toggle.addEventListener('click', () => {
      navLinks.classList.toggle('active');
    });

    // Close menu on link click (mobile)
    document.querySelectorAll('.nav-links a').forEach(link => {
      link.addEventListener('click', () => {
        navLinks.classList.remove('active');
      });
    });
</script>

</body>
</html>